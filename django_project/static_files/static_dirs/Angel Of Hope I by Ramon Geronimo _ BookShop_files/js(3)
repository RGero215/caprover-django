var APPLICATION=APPLICATION||{};APPLICATION.BOOKSHOP={BINDINGS:{BindBookCoverLink:function(){$(".cover-image-overlay").on("click",function(){var n=$("#view-book-cover-modal"),t=$(this).parents(":eq(2)").find(".view-cover-link").text().indexOf("Back")>=0,i=t?"View Back Cover":"View Front Cover";return APPLICATION.BOOKSHOP.FUNCTIONS.RequestBookCover(n.find(".front-cover"),$(".cover-image .front-cover").attr("src")+"Large"),APPLICATION.BOOKSHOP.FUNCTIONS.RequestBookCover(n.find(".back-cover"),$(".cover-image .back-cover").attr("src")+"Large"),n.find(".front-cover").toggle(t),n.find(".back-cover").toggle(!t),n.find(".view-cover-wrapper .view-cover-link").text(i).attr("title",i),n.find(".avlModal-header").text(t?"Front Cover":"Back Cover"),$.openModal({target:"#view-book-cover-modal",windowBuffer:10})});$(".view-cover-wrapper .view-cover-link").off("click").on("click",function(){var i=$("#view-book-cover-modal"),r=$(this).parents(":eq(1)"),n=$(this).text().indexOf("Back")>=0,t=n?"View Front Cover":"View Back Cover";return r.find(".back-cover").toggle(n),r.find(".front-cover").toggle(!n),$(this).text(t).attr("title",t),i.find(".view-cover-wrapper .view-cover-link").text(t).attr("title",t),i.find(".avlModal-header").text(n?"Back Cover":"Front Cover"),!1})},BindSectionClick:function(){$("div.section-name").off("click").on("click",function(){return $(this).find("i").hasClass("icon-down-open-1")?$(this).find("i").removeClass("icon-down-open-1").addClass("icon-up-open-1"):$(this).find("i").removeClass("icon-up-open-1").addClass("icon-down-open-1"),$("body").width()<=667&&$(this).next(".article-content").toggle(),!1})}},FUNCTIONS:{CheckEbookOnly:function(){$(".rb-buynow li").length===1&&$(".rb-buynow li label").text().indexOf("eBook")>=0&&$(".view-cover-wrapper .view-cover-link").hide()},RequestBookCover:function(n,t){if(n.attr("src")===""){var i=new XMLHttpRequest;i.open("GET",t,!0);i.onload=function(){if(i.readyState===4&&i.status===200){var r=i.getAllResponseHeaders();n.attr("src",t);t.indexOf("Back")>0&&r.indexOf("hasbackcover: false")<0&&$(".view-cover-wrapper").show();t.indexOf("Large")>0&&setTimeout(function(){$(".cover-loading-message").hide();$("#view-book-cover-modal .book-img").removeClass("book-img-loading")},1e3)}else n.attr("src","../CommonControls/Universal/BookShop/IMG/NoBookCover.jpg")};i.onerror=function(){return};i.send(null)}},SetBackCovers:function(){var n=$(".cover-image .front-cover").attr("src").replace("=Front","=Back");APPLICATION.BOOKSHOP.FUNCTIONS.RequestBookCover($(".cover-image .back-cover"),n)}}}